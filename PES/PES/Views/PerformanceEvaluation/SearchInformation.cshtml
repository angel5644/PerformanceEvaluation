@model IEnumerable<PES.Models.EmployeeManagerViewModel>
@using PES.Models 
@{
    ViewBag.Title = "Performance Files";
    var currentUser = ViewBag.currentEmployee;
    double total;
}

<div class="row text-center">
    <div class="col-md-12">
        <h2>Performance Files</h2>
    </div>
</div>
<hr />
<div class="row">
    <div class="col-md-12">
        <table id="Tableview" border="1" class="table table-striped table-bordered">
            <thead>
                <tr>

                    <th>Employee</th>
                    <th>Position</th>
                    @if (currentUser.ProfileId == (int)ProfileUser.Director)
                    {
                        <th>Manager</th>
                    }
                    <th>Final Score</th>
                    <th>English Score</th>
                    <th>Total 1</th>
                    @if (currentUser.ProfileId == (int)ProfileUser.Director)
                    {
                        <th>Rank</th>
                        <th>T1 * Rank</th>
                    }
                </tr>
            </thead>
            <tbody>
                @foreach (var employeeM in Model)
                {
                    <tr>
                        <td><a href="@Url.Action("ChoosePeriod", "PerformanceEvaluation", new { employeeEmail = employeeM.employee.Email, employeeID = employeeM.employee.EmployeeId})">@(employeeM.employee.FirstName + " " + employeeM.employee.LastName)</a></td>
                        <td>@(employeeM.employee.Position)</td>
                        @if (currentUser.ProfileId == (int)ProfileUser.Director)
                        {
                            <td>@(employeeM.manager.FirstName + " " + employeeM.manager.LastName)</td>
                        }
                        <td>@(employeeM.totalScore)</td>
                        <td>@(employeeM.englishScore)</td>
                        <td>@(total = employeeM.totalScore + employeeM.englishScore)</td>
                        @if (currentUser.ProfileId == (int)ProfileUser.Director)
                        {
                            <td><input type="text" value="@employeeM.rank" /></td>
                            <td>@(employeeM.rank * total)</td>
                        }

                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>


@section Styles
{
    @Styles.Render("~/Content/datatables/dataTables.bootstrap.min.css")
    @Styles.Render("~/Content/ExportDataTables/buttons.dataTables.min.css")
}


@section Scripts
{
    @Scripts.Render("~/Scripts/jquery.dataTables.min.js")
    @Scripts.Render("~/Scripts/dataTables.bootstrap.min.js")
    @Scripts.Render("~/Scripts/ExportDataTables/dataTables.buttons.min.js")
    @Scripts.Render("~/Scripts/ExportDataTables/jszip.min.js")
    @Scripts.Render("~/Scripts/ExportDataTables/pdfmake.min.js")
    @Scripts.Render("~/Scripts/ExportDataTables/vfs_fonts.js")
    @Scripts.Render("~/Scripts/ExportDataTables/buttons.html5.min.js")




    <script type="text/javascript">
    $(document).ready(function () {
        $('#Tableview').DataTable({
            //dom: 'Bfrtip',
            dom: '<"row"<"col-md-12"B>><"row"<"col-md-6"l><"col-md-6"f>>rtip',
            buttons: [
                'excel', 'pdf'],
            lengthMenu: [[25, 50, 100, -1], [25, 50, 100, "All"]],
            pageLength: 25
        });
    });
    </script>
  
}

   

@model PES.ViewModels.EmployeeDetailsViewModel
@using PES.Models;

@{
    ViewBag.Title = "Employee Details";
}

<hr />
<div class="row">
    <div class="col-md-12 well">
        <h3>Employee information</h3>
            <hr />
            <td class="dl-horizontal">
                <dt>
                    Name
                </dt>
            
                <dd>
                    @(Model.FirstName + " " + Model.LastName)
                </dd>
                <br />
                <dt>
                    @Html.DisplayNameFor(model => model.Email)
                </dt>

                <dd>
                    @Html.DisplayFor(model => model.Email)
                </dd>
                <br />
                <dt>
                    Profile
                </dt>

                <dd>
                    @Html.DisplayFor(model => model.Profile.Name)
                </dd>
                <br />
                @if ((int)Session["UserProfile"] == (int)ProfileUser.Resource){
                    <dd><strong>Manager</strong></dd>
                }
                else if ((int)Session["UserProfile"] == (int)ProfileUser.Manager)
                {
                    <dd><strong>Director</strong></dd>
                }
                else
                {
                    <dd></dd>
                }
                @if ((int)Session["UserProfile"] != (int)ProfileUser.Director)
                {
                    <dd>
                        @(Model.Manager.FirstName + " " + Model.Manager.LastName)
                    </dd>
                }
                <br />
                @if (Model.EndDate != null)
                {
                    <dt>
                        @Html.DisplayNameFor(model => model.EndDate)
                    </dt>

                    <dd>
                        @Html.DisplayFor(model => model.EndDate)
                    </dd>
                }
                else
                {
                    <dt hidden>
                        @Html.DisplayNameFor(model => model.EndDate)
                    </dt>

                    <dd hidden>
                        @Html.DisplayFor(model => model.EndDate)
                    </dd>
                }

                <br />
                
                    @if (Model.ProfileId == (int)ProfileUser.Resource)
                    {
                        <dt>
                            <strong>Org</strong>
                        </dt>
                        <dd>
                            @(Model.FirstName + " " + Model.LastName + " > " + Model.Manager.FirstName + " " + Model.Manager.LastName + " > " + Model.Director.FirstName + " " + Model.Director.LastName)
                        </dd>
                    }
                    else if (Model.ProfileId == (int)ProfileUser.Manager)
                    {
                        <dt>
                            <strong>Org</strong>
                        </dt>
                        <dd>
                            @(Model.FirstName + " " + Model.LastName + " > " + Model.Manager.FirstName + " " + Model.Manager.LastName)
                        </dd>
                    }
                    else
                    {
                        <dt hidden>
                            <strong>Org</strong>
                        </dt>
                        <dd hidden>
                            
                        </dd>
                    }
          </td>
    </div>
</div>
        @if ((int)Session["UserProfile"] != (int)ProfileUser.Resource)
        {
            <p>
               
                @Html.ActionLink("Back to List", "ViewEmployees") |
            
                @if ((int)Session["UserProfile"] == (int)ProfileUser.Director)
                {
                    @Html.ActionLink("Edit", "UpdateEmployee", new { id = Model.EmployeeId})
                }
            </p>
        }
        else if ((int)Session["UserProfile"] == (int)ProfileUser.Resource)
        {
            <p>
                @Html.ActionLink("Back to Performance Evaluations", "ChoosePeriod", "PerformanceEvaluation", new { @employeeEmail = Model.Email, @employeeID = Model.ProfileId }, null)
            </p>
        }
